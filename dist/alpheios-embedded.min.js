window.AlpheiosEmbed=function(e){var t={};function __webpack_require__(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,s){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(__webpack_require__.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(s,i,function(t){return e[t]}.bind(null,i));return s},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}([function(e){e.exports=JSON.parse('{"b":"3.3.0","a":"Alpheios Embedded Library"}')},function(e,t,s){"use strict";s.r(t),s.d(t,"importDependencies",(function(){return importDependencies})),s.d(t,"Embedded",(function(){return embedded_Embedded}));class State{constructor(e){this.panelStatus=void 0,this.tab=void 0,this.watchers=new Map}static create(e){let t=new State;for(let s of Object.keys(e))t[s]=e[s];return t}static get defaults(){return{panelStatus:State.statuses.panel.OPEN}}static get statuses(){return{embedLib:{PENDING:Symbol.for("Alpheios_Status_Pending"),ACTIVE:Symbol.for("Alpheios_Status_Active"),DEACTIVATED:Symbol.for("Alpheios_Status_Deactivated"),DISABLED:Symbol.for("Alpheios_Status_Disabled")},panel:{OPEN:Symbol.for("Alpheios_Status_PanelOpen"),CLOSED:Symbol.for("Alpheios_Status_PanelClosed"),DEFAULT:Symbol.for("Alpheios_Status_PanelDefault")},tab:{DEFAULT:"default"}}}setWatcher(e,t){return this.watchers.set(e,t),this}setItem(e,t){return this[e]=t,this.watchers&&this.watchers.has(e)&&this.watchers.get(e)(e,this),this}isPanelOpen(){return this.panelStatus===State.statuses.panel.OPEN}isPanelClosed(){return this.panelStatus===State.statuses.panel.CLOSED}isPanelStateDefault(){return this.panelStatus===State.statuses.panel.DEFAULT}isPanelStateValid(){return this.panelStatus===State.statuses.panel.OPEN||this.panelStatus===State.statuses.panel.CLOSED}setPanelOpen(){return this.setItem("panelStatus",State.statuses.panel.OPEN),this}setPanelClosed(){return this.setItem("panelStatus",State.statuses.panel.CLOSED),this}changeTab(e){return this.setItem("tab",e),this}activateUI(){return this.setItem("uiActive",!0),this}isActive(){return this.status===State.statuses.embedLib.ACTIVE}isDeactivated(){return this.status===State.statuses.embedLib.DEACTIVATED}isDisabled(){return this.status===State.statuses.embedLib.DISABLED}isTabStateDefault(){return this.tab===State.statuses.tab.DEFAULT}uiIsActive(){return this.uiActive}activate(){return this.status=State.statuses.embedLib.ACTIVE,this}deactivate(){return this.status=State.statuses.embedLib.DEACTIVATED,this}disable(){return this.status=State.statuses.embedLib.DISABLED,this}}var i=s(0);let a,o;function importDependencies(e){let t={},s={};switch(e.mode){case"production":t.components="./lib/alpheios-components.min.js",t.datamodels="./lib/alpheios-data-models.min.js";break;case"development":t.components="./lib/alpheios-components.js",t.datamodels="./lib/alpheios-data-models.js";break;case"custom":libs=e.libs;break;case"cdn":default:libs.components="https://cdn.jsdelivr.net/npm/alpheios-components@latest/dist/alpheios-components.min.js"}const importDep=(e,i)=>import(t[e]).then(()=>{s[e]=window[i]});return new Promise((e,t)=>{let i=[];i.push(importDep("components","AlpheiosComponents")),i.push(importDep("datamodels","AlpheiosDataModels")),Promise.all(i).then(()=>{a=s.components,o=s.datamodels,e(embedded_Embedded)}).catch(e=>{t(e)})})}class embedded_Embedded{constructor({clientId:e=null,authEnv:t=null,documentObject:s=document,enabledSelector:l=".alpheios-enabled",disabledSelector:r="",enabledClass:n="",disabledClass:u="",mobileTriggerEvent:d=null,desktopTriggerEvent:h=null,triggerPreCallback:c=(e=>!0),enableMouseMoveOverride:p=!1,popupInitialPos:b={},toolbarInitialPos:_={},actionPanelInitialPos:m={},layoutType:f="default",disableTextSelection:S=!1,textLangCode:g=null,overrideHelp:v=!1,simpleMode:A=!1,arethusaTbRefreshRetryCount:E=5,arethusaTbRefreshDelay:w=200}={}){if(this.clientId=e,null===this.clientId)throw new Error("Please identify the site.");this.doc=s,this.authEnv=t,this.state=new State,this.enabledSelector=l,this.disabledSelector=r,this.enabledClass=n,this.disabledClass=u,this.desktopTriggerEvent=h,this.mobileTriggerEvent=d,this.triggerPreCallback=c,this.enableMouseMoveOverride=p,this.simpleMode=A,this.state.setPanelClosed(),this.state.tab="info",this.ui=a.AppController.create(this.state,{storageAdapter:o.LocalStorageArea,textQueryTriggerDesktop:this.desktopTriggerEvent,textQueryTriggerMobile:this.mobileTriggerEvent,textQuerySelector:this.enabledSelector,triggerPreCallback:this.triggerPreCallback,enableMouseMoveOverride:this.enableMouseMoveOverride,app:{version:""+i.b,buildBranch:"move-options-to-data-models",buildNumber:"20201106434",buildName:"move-options-to-data-models.20201106434",name:i.a},appType:a.Platform.appTypes.EMBEDDED_LIBRARY,clientId:this.clientId,disableTextSelection:S,textLangCode:g,overrideHelp:v,configServiceUrl:"https://config.alpheios.net/v1/config",arethusaTbRefreshRetryCount:E,arethusaTbRefreshDelay:w}),this.authEnv?t.CLIENT_ID?this.ui.registerModule(a.AuthModule,{auth:new a.AppAuthenticator(t)}):t.LOGIN_URL&&this.ui.registerModule(a.AuthModule,{auth:new a.SessionAuthenticator(t)}):this.ui.registerModule(a.AuthModule,{auth:null});let P={};this.simpleMode&&(P.showNav=!1),this.ui.registerModule(a.PanelModule,P);let y={};b&&Object.values(b).filter(e=>Boolean(e)).length>0&&(y.initialPos=b),this.simpleMode&&(y.showNav=!1),this.ui.registerModule(a.PopupModule,y);let M={};m&&Object.values(m).filter(e=>Boolean(e)).length>0&&(M.initialPos=m),this.simpleMode?M.showNav=!1:M.showNav=!0;let T={};this.simpleMode&&(T.showNav=!1),"default"===f?(_&&Object.values(_).filter(e=>Boolean(e)).length>0&&(T.initialPos=_),this.ui.registerModule(a.ToolbarModule,T),this.ui.registerModule(a.ActionPanelModule,{showNav:M.showNav})):"readingTools"===f&&(this.ui.platform.isDesktop?(_&&Object.values(_).filter(e=>Boolean(e)).length>0&&(T.initialPos=_),this.ui.registerModule(a.ToolbarModule,T)):this.ui.platform.isMobile&&this.ui.registerModule(a.ActionPanelModule,{lookupResultsIn:"panel",initialPos:M.initialPos,showNav:M.showNav}))}get platform(){return this.ui.platform}notifyExtension(){this.doc.body.dispatchEvent(new Event("Alpheios_Embedded_Response"))}async activate(){try{this.notifyExtension(),await this.ui.activate(),this.doc.body.setAttribute("alpheios-embed-lib-status","active"),this.doc.body.addEventListener("Alpheios_Embedded_Check",e=>{this.notifyExtension(e)}),this.ui.setEmbedLibActive(!0)}catch(e){return void console.error("Unexpected error activating Alpheios: "+e)}let e=this.enabledSelector;if(!e)throw new Error("Configuration must define selector");let t=this.doc.querySelectorAll(e);if(0===t.length&&console.warn(`Alpheios was activated for the page but not any content (no elements matching ${t}).`),this.enabledClass)for(let e of t)e.classList.add(this.enabledClass);if(this.disabledSelector){let e=this.doc.querySelectorAll(this.disabledSelector);for(let t of e)t.setAttribute("data-alpheios-ignore","all"),this.disabledClass&&t.classList.add(this.disabledClass)}new a.AlignmentSelector(this.doc,{}).activate();a.AppController.initAlignedTranslation(this.doc,".aligned-translation",{edges:{left:!0,right:!0,bottom:!1,top:!1},restrictSize:{min:{width:200}},restrictEdges:{outer:this.doc.body,endOnly:!0},inertia:!0},e=>{e.target.style.width=e.rect.width+"px"});return this}openToolbar(){this.ui.openToolbar()}openActionPanel(){this.ui.platform.isMobile&&this.ui.closePanel(),this.ui.openActionPanel()}closeActionPanel(){this.ui.closeActionPanel()}openActionPanelLookup(){this.ui.platform.isMobile&&this.ui.closePanel(),this.ui.openActionPanel({showNav:!1})}openActionPanelToolbar(){this.ui.platform.isMobile&&this.ui.closePanel(),this.ui.openActionPanel({showLookup:!1})}}}]);